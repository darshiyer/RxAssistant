{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Admin\\\\Downloads\\\\Tsunade\\\\Tsunade\\\\frontend\\\\src\\\\components\\\\GoogleCalendarCallback.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { motion } from 'framer-motion';\nimport { CheckCircle, AlertCircle, Loader } from 'lucide-react';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst GoogleCalendarCallback = () => {\n  _s();\n  const [status, setStatus] = useState('processing'); // 'processing', 'success', 'error'\n  const [message, setMessage] = useState('Processing Google Calendar authorization...');\n  useEffect(() => {\n    const handleCallback = async () => {\n      const urlParams = new URLSearchParams(window.location.search);\n      const code = urlParams.get('code');\n      const state = urlParams.get('state');\n      const error = urlParams.get('error');\n      if (error) {\n        console.error('OAuth error:', error);\n        setStatus('error');\n        setMessage('Authorization was denied or failed. Please try again.');\n\n        // Close popup or redirect on error\n        if (window.opener) {\n          window.close();\n        } else {\n          setTimeout(() => {\n            window.location.href = '/';\n          }, 3000);\n        }\n        return;\n      }\n      if (code) {\n        try {\n          // Exchange code for tokens\n          const response = await fetch('/api/v1/calendar/exchange-token', {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n              authorization_code: code,\n              state: state\n            })\n          });\n          const data = await response.json();\n          if (data.success) {\n            // Store credentials in localStorage for the parent window to pick up\n            localStorage.setItem('google_calendar_credentials', JSON.stringify(data.credentials));\n            setStatus('success');\n            setMessage('Google Calendar authorization successful!');\n\n            // Close the popup window if this is running in a popup\n            if (window.opener) {\n              window.close();\n            } else {\n              // Redirect to main app if not in popup\n              setTimeout(() => {\n                window.location.href = '/';\n              }, 2000);\n            }\n          } else {\n            console.error('Failed to exchange token:', data);\n            setStatus('error');\n            setMessage('Failed to authorize Google Calendar. Please try again.');\n          }\n        } catch (err) {\n          console.error('Error exchanging token:', err);\n          setStatus('error');\n          setMessage('An error occurred during authorization. Please try again.');\n        }\n      }\n    };\n    handleCallback();\n  }, []);\n  const getStatusIcon = () => {\n    switch (status) {\n      case 'success':\n        return /*#__PURE__*/_jsxDEV(CheckCircle, {\n          className: \"h-16 w-16 text-green-500\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 16\n        }, this);\n      case 'error':\n        return /*#__PURE__*/_jsxDEV(AlertCircle, {\n          className: \"h-16 w-16 text-red-500\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 16\n        }, this);\n      default:\n        return /*#__PURE__*/_jsxDEV(Loader, {\n          className: \"h-16 w-16 text-blue-500 animate-spin\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 16\n        }, this);\n    }\n  };\n  const getStatusColor = () => {\n    switch (status) {\n      case 'success':\n        return 'text-green-600';\n      case 'error':\n        return 'text-red-600';\n      default:\n        return 'text-blue-600';\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex items-center justify-center min-h-screen bg-gray-50\",\n    children: /*#__PURE__*/_jsxDEV(motion.div, {\n      className: \"text-center p-8 bg-white rounded-lg shadow-lg max-w-md mx-4\",\n      initial: {\n        opacity: 0,\n        scale: 0.9\n      },\n      animate: {\n        opacity: 1,\n        scale: 1\n      },\n      transition: {\n        duration: 0.3\n      },\n      children: [/*#__PURE__*/_jsxDEV(motion.div, {\n        className: \"mb-6\",\n        initial: {\n          scale: 0\n        },\n        animate: {\n          scale: 1\n        },\n        transition: {\n          delay: 0.2,\n          type: \"spring\",\n          stiffness: 200\n        },\n        children: getStatusIcon()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(motion.h2, {\n        className: `text-xl font-semibold mb-4 ${getStatusColor()}`,\n        initial: {\n          opacity: 0,\n          y: 20\n        },\n        animate: {\n          opacity: 1,\n          y: 0\n        },\n        transition: {\n          delay: 0.3\n        },\n        children: [status === 'processing' && 'Processing Authorization', status === 'success' && 'Authorization Successful', status === 'error' && 'Authorization Failed']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(motion.p, {\n        className: \"text-gray-600 leading-relaxed\",\n        initial: {\n          opacity: 0,\n          y: 20\n        },\n        animate: {\n          opacity: 1,\n          y: 0\n        },\n        transition: {\n          delay: 0.4\n        },\n        children: message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 9\n      }, this), status === 'success' && /*#__PURE__*/_jsxDEV(motion.p, {\n        className: \"text-sm text-gray-500 mt-4\",\n        initial: {\n          opacity: 0\n        },\n        animate: {\n          opacity: 1\n        },\n        transition: {\n          delay: 0.6\n        },\n        children: \"This window will close automatically...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 11\n      }, this), status === 'error' && /*#__PURE__*/_jsxDEV(motion.p, {\n        className: \"text-sm text-gray-500 mt-4\",\n        initial: {\n          opacity: 0\n        },\n        animate: {\n          opacity: 1\n        },\n        transition: {\n          delay: 0.6\n        },\n        children: \"Redirecting back to the app...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 104,\n    columnNumber: 5\n  }, this);\n};\n_s(GoogleCalendarCallback, \"RUpqnhTlasRtlqdpxB0eZwAgVJA=\");\n_c = GoogleCalendarCallback;\nexport default GoogleCalendarCallback;\nvar _c;\n$RefreshReg$(_c, \"GoogleCalendarCallback\");","map":{"version":3,"names":["React","useEffect","useState","motion","CheckCircle","AlertCircle","Loader","axios","jsxDEV","_jsxDEV","GoogleCalendarCallback","_s","status","setStatus","message","setMessage","handleCallback","urlParams","URLSearchParams","window","location","search","code","get","state","error","console","opener","close","setTimeout","href","response","fetch","method","headers","body","JSON","stringify","authorization_code","data","json","success","localStorage","setItem","credentials","err","getStatusIcon","className","fileName","_jsxFileName","lineNumber","columnNumber","getStatusColor","children","div","initial","opacity","scale","animate","transition","duration","delay","type","stiffness","h2","y","p","_c","$RefreshReg$"],"sources":["C:/Users/Admin/Downloads/Tsunade/Tsunade/frontend/src/components/GoogleCalendarCallback.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { motion } from 'framer-motion';\nimport { CheckCircle, AlertCircle, Loader } from 'lucide-react';\nimport axios from 'axios';\n\nconst GoogleCalendarCallback = () => {\n  const [status, setStatus] = useState('processing'); // 'processing', 'success', 'error'\n  const [message, setMessage] = useState('Processing Google Calendar authorization...');\n\n  useEffect(() => {\n    const handleCallback = async () => {\n      const urlParams = new URLSearchParams(window.location.search);\n      const code = urlParams.get('code');\n      const state = urlParams.get('state');\n      const error = urlParams.get('error');\n\n      if (error) {\n        console.error('OAuth error:', error);\n        setStatus('error');\n        setMessage('Authorization was denied or failed. Please try again.');\n        \n        // Close popup or redirect on error\n        if (window.opener) {\n          window.close();\n        } else {\n          setTimeout(() => {\n            window.location.href = '/';\n          }, 3000);\n        }\n        return;\n      }\n\n      if (code) {\n        try {\n          // Exchange code for tokens\n          const response = await fetch('/api/v1/calendar/exchange-token', {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json',\n            },\n            body: JSON.stringify({\n              authorization_code: code,\n              state: state\n            }),\n          });\n\n          const data = await response.json();\n          \n          if (data.success) {\n            // Store credentials in localStorage for the parent window to pick up\n            localStorage.setItem('google_calendar_credentials', JSON.stringify(data.credentials));\n            \n            setStatus('success');\n            setMessage('Google Calendar authorization successful!');\n            \n            // Close the popup window if this is running in a popup\n            if (window.opener) {\n              window.close();\n            } else {\n              // Redirect to main app if not in popup\n              setTimeout(() => {\n                window.location.href = '/';\n              }, 2000);\n            }\n          } else {\n            console.error('Failed to exchange token:', data);\n            setStatus('error');\n            setMessage('Failed to authorize Google Calendar. Please try again.');\n          }\n        } catch (err) {\n          console.error('Error exchanging token:', err);\n          setStatus('error');\n          setMessage('An error occurred during authorization. Please try again.');\n        }\n      }\n    };\n\n    handleCallback();\n  }, []);\n\n  const getStatusIcon = () => {\n    switch (status) {\n      case 'success':\n        return <CheckCircle className=\"h-16 w-16 text-green-500\" />;\n      case 'error':\n        return <AlertCircle className=\"h-16 w-16 text-red-500\" />;\n      default:\n        return <Loader className=\"h-16 w-16 text-blue-500 animate-spin\" />;\n    }\n  };\n\n  const getStatusColor = () => {\n    switch (status) {\n      case 'success':\n        return 'text-green-600';\n      case 'error':\n        return 'text-red-600';\n      default:\n        return 'text-blue-600';\n    }\n  };\n\n  return (\n    <div className=\"flex items-center justify-center min-h-screen bg-gray-50\">\n      <motion.div \n        className=\"text-center p-8 bg-white rounded-lg shadow-lg max-w-md mx-4\"\n        initial={{ opacity: 0, scale: 0.9 }}\n        animate={{ opacity: 1, scale: 1 }}\n        transition={{ duration: 0.3 }}\n      >\n        <motion.div \n          className=\"mb-6\"\n          initial={{ scale: 0 }}\n          animate={{ scale: 1 }}\n          transition={{ delay: 0.2, type: \"spring\", stiffness: 200 }}\n        >\n          {getStatusIcon()}\n        </motion.div>\n        \n        <motion.h2 \n          className={`text-xl font-semibold mb-4 ${getStatusColor()}`}\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ delay: 0.3 }}\n        >\n          {status === 'processing' && 'Processing Authorization'}\n          {status === 'success' && 'Authorization Successful'}\n          {status === 'error' && 'Authorization Failed'}\n        </motion.h2>\n        \n        <motion.p \n          className=\"text-gray-600 leading-relaxed\"\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ delay: 0.4 }}\n        >\n          {message}\n        </motion.p>\n        \n        {status === 'success' && (\n          <motion.p \n            className=\"text-sm text-gray-500 mt-4\"\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            transition={{ delay: 0.6 }}\n          >\n            This window will close automatically...\n          </motion.p>\n        )}\n        \n        {status === 'error' && (\n          <motion.p \n            className=\"text-sm text-gray-500 mt-4\"\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            transition={{ delay: 0.6 }}\n          >\n            Redirecting back to the app...\n          </motion.p>\n        )}\n      </motion.div>\n    </div>\n  );\n};\n\nexport default GoogleCalendarCallback;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}