{"ast":null,"code":"import React,{useState,useCallback}from'react';import{motion,AnimatePresence}from'framer-motion';import{useDropzone}from'react-dropzone';import{Upload,Camera,FileText,X,Image as ImageIcon,Stethoscope,Activity,Calendar,Utensils,AlertCircle,CheckCircle,Clock,Brain,Dumbbell}from'lucide-react';import{useHealth}from'../contexts/HealthContext';import{prescriptionAPI,calendarAPI,healthAPI}from'../services/apiService';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const PrescriptionUpload=_ref=>{let{onProcessPrescription,extractedText,medicines,onClearResults}=_ref;const{user,processPrescription}=useHealth();const[uploadedFile,setUploadedFile]=useState(null);const[preview,setPreview]=useState(null);const[fileName,setFileName]=useState('');const[isProcessing,setIsProcessing]=useState(false);const[ocrText,setOcrText]=useState('');const[analysisResult,setAnalysisResult]=useState(null);const[recommendations,setRecommendations]=useState(null);const[error,setError]=useState('');const[currentStep,setCurrentStep]=useState('upload');// upload, ocr, analysis, recommendations\nconst[showHealthAnalysis,setShowHealthAnalysis]=useState(false);const onDrop=useCallback(acceptedFiles=>{const file=acceptedFiles[0];if(file){setUploadedFile(file);setFileName(file.name);setError('');// Create preview\nconst reader=new FileReader();reader.onload=()=>{setPreview(reader.result);};reader.readAsDataURL(file);setCurrentStep('upload');}},[]);const{getRootProps,getInputProps,isDragActive}=useDropzone({onDrop,accept:{'image/*':['.jpeg','.jpg','.png','.gif','.bmp'],'application/pdf':['.pdf']},multiple:false});const clearFile=()=>{setUploadedFile(null);setPreview(null);setFileName('');setOcrText('');setAnalysisResult(null);setRecommendations(null);setError('');setCurrentStep('upload');};const processOCR=async()=>{if(!uploadedFile){setError('Please upload a file first');return;}setIsProcessing(true);setError('');setCurrentStep('ocr');try{const formData=new FormData();formData.append('file',uploadedFile);const response=await prescriptionAPI.extractText(formData);if(response.success){setOcrText(response.text);setCurrentStep('analysis');}else{setError(response.message||'Failed to extract text from image');}}catch(err){setError('Error processing image: '+err.message);}finally{setIsProcessing(false);}};const handleHealthAnalysisClick=async()=>{if(!analysisResult){setError('Please upload and analyze a prescription first');return;}setShowHealthAnalysis(true);setIsProcessing(true);setError('');try{// Get enhanced recommendations based on detected diseases\nconst enhancedRecommendations=await getPersonalizedRecommendations(analysisResult);if(enhancedRecommendations){setRecommendations(enhancedRecommendations);// Schedule health events in the background\nawait scheduleHealthEvents(analysisResult);// Update health context\nawait processPrescription({...analysisResult,recommendations:enhancedRecommendations});setCurrentStep('recommendations');}else{setError('Unable to generate health recommendations. Please try again.');}}catch(err){setError('Error generating health analysis: '+err.message);}finally{setIsProcessing(false);}};const handleHealthAnalysis=async()=>{if(!uploadedFile){setError('Please upload a prescription first');return;}setIsProcessing(true);setError('');setCurrentStep('ocr');try{// First extract text from the prescription\nconst formData=new FormData();formData.append('file',uploadedFile);const ocrResponse=await prescriptionAPI.extractText(formData);if(!ocrResponse.success){setError(ocrResponse.message||'Failed to extract text from prescription');return;}setOcrText(ocrResponse.text);setCurrentStep('analysis');// Perform comprehensive health analysis\nconst analysisResponse=await prescriptionAPI.uploadPrescription({prescription_text:ocrResponse.text,image_reference:fileName,metadata:{upload_timestamp:new Date().toISOString(),file_type:uploadedFile===null||uploadedFile===void 0?void 0:uploadedFile.type,file_size:uploadedFile===null||uploadedFile===void 0?void 0:uploadedFile.size}});if(analysisResponse.success){setAnalysisResult(analysisResponse.analysis);// Get enhanced personalized recommendations including diet and exercise\nconst enhancedRecommendations=await getPersonalizedRecommendations(analysisResponse.analysis);if(enhancedRecommendations){setRecommendations(enhancedRecommendations);// Schedule health events in calendar\nawait scheduleHealthEvents(analysisResponse.analysis);setCurrentStep('recommendations');}else{setError('Failed to generate personalized recommendations');}}else{setError(analysisResponse.message||'Failed to analyze prescription');}}catch(err){setError('Error during health analysis: '+err.message);}finally{setIsProcessing(false);}};const diagnoseDiseases=async()=>{if(!ocrText){setError('No text available for analysis');return;}setIsProcessing(true);setError('');try{// Use the new integrated prescription processing endpoint\nconst response=await prescriptionAPI.uploadPrescription({prescription_text:ocrText,image_reference:fileName,metadata:{upload_timestamp:new Date().toISOString(),file_type:uploadedFile===null||uploadedFile===void 0?void 0:uploadedFile.type,file_size:uploadedFile===null||uploadedFile===void 0?void 0:uploadedFile.size}});if(response.success){// The new endpoint handles everything: analysis, recommendations, and dashboard integration\nsetAnalysisResult({prescription_id:response.prescription_id,integration_summary:response.integration_summary,recommendations_created:response.recommendations_created,dashboard_entries_created:response.dashboard_entries_created,conditions_detected:response.conditions_detected});const prescriptionData={prescription_id:response.prescription_id,ocr_text:ocrText,timestamp:new Date().toISOString(),integration_status:'completed'};// Use context to update local state\nawait processPrescription(prescriptionData);if(onProcessPrescription){onProcessPrescription(prescriptionData);}setCurrentStep('recommendations');}else{setError(response.message||'Failed to process prescription');}}catch(err){setError('Error processing prescription: '+err.message);}finally{setIsProcessing(false);}};const getPersonalizedRecommendations=async analysisResult=>{try{var _analysisResult$extra;// Extract detected diseases from analysis result\nconst detectedDiseases=(analysisResult===null||analysisResult===void 0?void 0:(_analysisResult$extra=analysisResult.extracted_info)===null||_analysisResult$extra===void 0?void 0:_analysisResult$extra.conditions)||(analysisResult===null||analysisResult===void 0?void 0:analysisResult.conditions_detected)||[];if(detectedDiseases.length===0){console.warn('No diseases detected for recommendations');return null;}// Get comprehensive health recommendations including diet and exercise\nconst[dietResponse,exerciseResponse]=await Promise.all([// Get day-wise diet chart\nhealthAPI.getDayWiseDietChart({detected_diseases:detectedDiseases,user_preferences:{},duration_days:7}),// Get disease-based exercise plan\nhealthAPI.getDiseaseBasedExercisePlan({detected_diseases:detectedDiseases,user_preferences:{},fitness_level:\"beginner\",available_time:30})]);return{diseases:detectedDiseases,dietChart:dietResponse!==null&&dietResponse!==void 0&&dietResponse.success?dietResponse:null,exercisePlan:exerciseResponse!==null&&exerciseResponse!==void 0&&exerciseResponse.success?exerciseResponse:null,timestamp:new Date().toISOString()};}catch(error){console.error('Error getting personalized recommendations:',error);return null;}};const scheduleHealthEvents=async analysisData=>{try{var _analysisData$extract,_analysisData$extract2,_analysisData$extract3,_analysisData$extract4;const token=localStorage.getItem('access_token');if(!token)return;// Create medication reminders\nif((analysisData===null||analysisData===void 0?void 0:(_analysisData$extract=analysisData.extracted_info)===null||_analysisData$extract===void 0?void 0:(_analysisData$extract2=_analysisData$extract.medications)===null||_analysisData$extract2===void 0?void 0:_analysisData$extract2.length)>0){for(const medicine of analysisData.extracted_info.medications){if(medicine.dosage&&medicine.frequency){await createMedicationReminder(medicine);}}}// Schedule follow-up appointments if conditions are detected\nif((analysisData===null||analysisData===void 0?void 0:(_analysisData$extract3=analysisData.extracted_info)===null||_analysisData$extract3===void 0?void 0:(_analysisData$extract4=_analysisData$extract3.medical_conditions)===null||_analysisData$extract4===void 0?void 0:_analysisData$extract4.length)>0){await scheduleFollowUpAppointment(analysisData.extracted_info.medical_conditions);}}catch(error){console.error('Error scheduling health events:',error);}};const createMedicationReminder=async medicine=>{try{const response=await calendarAPI.createEvent({title:`Take ${medicine.name}`,description:`Medication reminder: ${medicine.name} - ${medicine.dosage}\\nFrequency: ${medicine.frequency}`,start_time:new Date(Date.now()+24*60*60*1000).toISOString(),duration_minutes:15,recurrence:medicine.frequency&&medicine.frequency.toLowerCase().includes('daily')?'daily':null});if(response.success){console.log(`Medication reminder created for ${medicine.name}:`,response.data);}}catch(error){console.error('Error creating medication reminder:',error);}};const scheduleFollowUpAppointment=async conditions=>{try{const response=await calendarAPI.createEvent({title:'Follow-up Medical Appointment',description:`Follow-up appointment for: ${conditions.join(', ')}\\nScheduled based on prescription analysis`,start_time:new Date(Date.now()+7*24*60*60*1000).toISOString(),duration_minutes:60});if(response.success){console.log('Follow-up appointment scheduled:',response.data);}}catch(error){console.error('Error scheduling follow-up appointment:',error);}};const[calendarIntegration,setCalendarIntegration]=useState({authorized:false,loading:false,events:[],credentials:null});// Google Calendar Integration\nconst handleGoogleCalendarAuth=async()=>{setCalendarIntegration(prev=>({...prev,loading:true}));try{const response=await calendarAPI.getAuthUrl({state:'prescription_analysis'});if(response.success){// Open Google OAuth in a new window\nconst authWindow=window.open(response.authorization_url,'google-auth','width=500,height=600,scrollbars=yes,resizable=yes');// Listen for the auth completion\nconst checkClosed=setInterval(()=>{if(authWindow.closed){clearInterval(checkClosed);// Check if auth was successful by checking localStorage or making a status call\nconst credentials=localStorage.getItem('google_calendar_credentials');if(credentials){setCalendarIntegration(prev=>({...prev,authorized:true,loading:false,credentials:JSON.parse(credentials)}));localStorage.removeItem('google_calendar_credentials');}else{setCalendarIntegration(prev=>({...prev,loading:false}));}}},1000);}}catch(err){console.error('Error with Google Calendar auth:',err);setCalendarIntegration(prev=>({...prev,loading:false}));}};const createCalendarEvents=async()=>{if(!(recommendations!==null&&recommendations!==void 0&&recommendations.exercise_recommendations)||!calendarIntegration.authorized||!calendarIntegration.credentials)return;setCalendarIntegration(prev=>({...prev,loading:true}));try{var _recommendations$exer;// Format exercise plan for the API\nconst exercisePlan={weekly_schedule:((_recommendations$exer=recommendations.exercise_recommendations.exercises)===null||_recommendations$exer===void 0?void 0:_recommendations$exer.map((exercise,index)=>({day:['Monday','Tuesday','Wednesday','Thursday','Friday','Saturday','Sunday'][index%7],exercises:[{name:exercise.name,duration:exercise.duration||'30 minutes',intensity:exercise.intensity||'moderate',description:exercise.description||''}]})))||[]};const response=await calendarAPI.createExerciseEvents({credentials:calendarIntegration.credentials,exercise_plan:exercisePlan,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone});if(response.success){setCalendarIntegration(prev=>({...prev,events:response.created_events,loading:false}));alert(`Successfully created ${response.created_events.length} calendar events!`);}else{throw new Error('Failed to create calendar events');}}catch(err){console.error('Error creating calendar events:',err);setCalendarIntegration(prev=>({...prev,loading:false}));alert('Failed to create calendar events. Please try again.');}};const scheduleToCalendar=async(type,item)=>{try{const response=await calendarAPI.createEvent({title:`${type}: ${item.name||item.category}`,description:item.description||item.notes||'',start_time:new Date(Date.now()+24*60*60*1000).toISOString(),// Tomorrow\nduration_minutes:type==='Exercise'?30:60});if(response.success){alert(`${type} scheduled successfully!`);}else{alert(`Failed to schedule ${type}`);}}catch(err){alert(`Error scheduling ${type}: ${err.message}`);}};const renderStepIndicator=()=>{const steps=[{id:'upload',label:'Upload',icon:Upload},{id:'ocr',label:'Extract Text',icon:FileText},{id:'analysis',label:'Diagnose',icon:Stethoscope},{id:'recommendations',label:'Recommendations',icon:Activity}];const stepIndex=steps.findIndex(step=>step.id===currentStep);return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center mb-6\",children:steps.map((step,index)=>{const Icon=step.icon;const isActive=index<=stepIndex;const isCurrent=step.id===currentStep;return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:`flex items-center justify-center w-10 h-10 rounded-full ${isActive?'bg-primary-500 text-white':'bg-gray-200 text-gray-500'} ${isCurrent?'ring-2 ring-primary-300':''}`,children:/*#__PURE__*/_jsx(Icon,{className:\"w-5 h-5\"})}),index<steps.length-1&&/*#__PURE__*/_jsx(\"div\",{className:`w-12 h-1 mx-2 ${index<stepIndex?'bg-primary-500':'bg-gray-200'}`})]},step.id);})});};const renderUploadSection=()=>/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:\"glass-card rounded-2xl p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mb-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold text-gray-800 dark:text-gray-200 mb-2\",children:\"Upload Prescription\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 dark:text-gray-400\",children:\"Drag & drop your prescription image or click to browse\"})]}),/*#__PURE__*/_jsxs(\"div\",{...getRootProps(),className:`upload-zone ${isDragActive?'upload-zone-active':''} ${isProcessing?'pointer-events-none opacity-50':''}`,children:[/*#__PURE__*/_jsx(\"input\",{...getInputProps()}),/*#__PURE__*/_jsx(AnimatePresence,{mode:\"wait\",children:!preview?/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:\"space-y-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-16 h-16 bg-gradient-to-r from-primary-100 to-secondary-100 dark:from-primary-900/20 dark:to-secondary-900/20 rounded-full flex items-center justify-center\",children:/*#__PURE__*/_jsx(Upload,{className:\"w-8 h-8 text-primary-600 dark:text-primary-400\"})})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-lg font-medium text-gray-800 dark:text-gray-200 mb-2\",children:isDragActive?'Drop your file here':'Choose a file or drag it here'}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 dark:text-gray-400\",children:\"Supports JPG, PNG, GIF, BMP, and PDF files\"})]})]},\"upload-prompt\"):/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,scale:0.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0.9},className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[fileName.toLowerCase().endsWith('.pdf')?/*#__PURE__*/_jsx(\"div\",{className:\"w-full h-32 bg-gradient-to-r from-red-100 to-red-200 dark:from-red-900/20 dark:to-red-800/20 rounded-lg flex items-center justify-center\",children:/*#__PURE__*/_jsx(FileText,{className:\"w-12 h-12 text-red-500\"})}):/*#__PURE__*/_jsx(\"img\",{src:preview,alt:\"Preview\",className:\"w-full h-32 object-cover rounded-lg\"}),/*#__PURE__*/_jsx(\"button\",{onClick:e=>{e.stopPropagation();clearFile();},className:\"absolute -top-2 -right-2 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center hover:bg-red-600 transition-colors\",children:/*#__PURE__*/_jsx(X,{className:\"w-4 h-4\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-800 dark:text-gray-200\",children:fileName}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-600 dark:text-gray-400\",children:\"Click to change file\"})]})]},\"preview\")})]}),preview&&/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-3 mt-6\",children:[/*#__PURE__*/_jsxs(motion.button,{onClick:processOCR,disabled:isProcessing,className:\"btn-primary flex items-center justify-center space-x-2\",whileHover:{scale:1.02},whileTap:{scale:0.98},children:[/*#__PURE__*/_jsx(FileText,{className:\"w-4 h-4\"}),/*#__PURE__*/_jsx(\"span\",{children:isProcessing?'Processing...':'Extract Text'})]}),/*#__PURE__*/_jsxs(motion.button,{onClick:handleHealthAnalysisClick,disabled:!analysisResult||isProcessing,className:`flex items-center justify-center space-x-2 px-4 py-2 rounded-lg font-medium transition-all duration-200 ${!analysisResult||isProcessing?'bg-gray-300 text-gray-500 cursor-not-allowed':'bg-gradient-to-r from-emerald-500 to-teal-600 text-white hover:from-emerald-600 hover:to-teal-700 shadow-lg hover:shadow-xl'}`,whileHover:!analysisResult||isProcessing?{}:{scale:1.02},whileTap:!analysisResult||isProcessing?{}:{scale:0.98},children:[/*#__PURE__*/_jsx(Activity,{className:\"w-4 h-4\"}),/*#__PURE__*/_jsx(\"span\",{children:isProcessing?'Analyzing...':'Health Analysis'})]})]})]});const renderAnalysisSection=()=>{var _analysisResult$extra2,_analysisResult$extra3,_analysisResult$extra4,_analysisResult$extra5;return/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:\"glass-card rounded-2xl p-6 mt-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-4\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-xl font-semibold text-gray-800 dark:text-gray-200 flex items-center\",children:[/*#__PURE__*/_jsx(Brain,{className:\"w-6 h-6 mr-2 text-primary-600\"}),\"AI Analysis\"]}),ocrText&&/*#__PURE__*/_jsxs(motion.button,{onClick:diagnoseDiseases,disabled:isProcessing,className:\"btn-primary flex items-center space-x-2\",whileHover:{scale:1.02},whileTap:{scale:0.98},children:[/*#__PURE__*/_jsx(Stethoscope,{className:\"w-4 h-4\"}),/*#__PURE__*/_jsx(\"span\",{children:isProcessing?'Diagnosing...':'Diagnose Disease'})]})]}),ocrText&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\",children:\"Extracted Text:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-50 dark:bg-gray-800 rounded-lg p-3 text-sm text-gray-700 dark:text-gray-300 max-h-32 overflow-y-auto\",children:ocrText})]}),analysisResult&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2 text-green-600\",children:[/*#__PURE__*/_jsx(CheckCircle,{className:\"w-5 h-5\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:analysisResult.message})]}),(analysisResult===null||analysisResult===void 0?void 0:(_analysisResult$extra2=analysisResult.extracted_info)===null||_analysisResult$extra2===void 0?void 0:(_analysisResult$extra3=_analysisResult$extra2.medical_conditions)===null||_analysisResult$extra3===void 0?void 0:_analysisResult$extra3.length)>0&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\",children:\"Detected Conditions:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-wrap gap-2\",children:analysisResult.extracted_info.medical_conditions.map((condition,index)=>/*#__PURE__*/_jsx(\"span\",{className:\"px-3 py-1 bg-red-100 text-red-800 rounded-full text-sm\",children:condition},index))})]}),(analysisResult===null||analysisResult===void 0?void 0:(_analysisResult$extra4=analysisResult.extracted_info)===null||_analysisResult$extra4===void 0?void 0:(_analysisResult$extra5=_analysisResult$extra4.medications)===null||_analysisResult$extra5===void 0?void 0:_analysisResult$extra5.length)>0&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\",children:\"Medications:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-2\",children:analysisResult.extracted_info.medications.map((med,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-medium text-blue-800 dark:text-blue-200\",children:med.name}),med.dosage&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-blue-600 dark:text-blue-300\",children:[\"Dosage: \",med.dosage]}),med.frequency&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-blue-600 dark:text-blue-300\",children:[\"Frequency: \",med.frequency]})]},index))})]})]})]});};const renderRecommendations=()=>{var _recommendations$diet,_recommendations$exer2,_recommendations$diet2;return/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:\"space-y-6 mt-6\",children:[(recommendations===null||recommendations===void 0?void 0:recommendations.dietChart)&&/*#__PURE__*/_jsxs(\"div\",{className:\"glass-card rounded-2xl p-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-between items-center mb-4\",children:/*#__PURE__*/_jsxs(\"h3\",{className:\"text-xl font-semibold text-gray-800 dark:text-gray-200 flex items-center\",children:[/*#__PURE__*/_jsx(Utensils,{className:\"w-6 h-6 mr-2 text-orange-600\"}),\"7-Day Diet Chart\"]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[(_recommendations$diet=recommendations.dietChart.diet_plan)===null||_recommendations$diet===void 0?void 0:_recommendations$diet.map((day,index)=>{var _day$meals;return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-orange-50 dark:bg-orange-900/20 rounded-lg p-4\",children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"font-medium text-orange-800 dark:text-orange-200 mb-3\",children:[\"Day \",day.day,\" - \",day.day_name]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3\",children:(_day$meals=day.meals)===null||_day$meals===void 0?void 0:_day$meals.map((meal,mealIndex)=>{var _meal$foods;return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white dark:bg-gray-800 rounded-lg p-3\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"font-medium text-orange-700 dark:text-orange-300 capitalize mb-2\",children:meal.meal_type}),/*#__PURE__*/_jsx(\"ul\",{className:\"text-sm text-gray-600 dark:text-gray-400 space-y-1\",children:(_meal$foods=meal.foods)===null||_meal$foods===void 0?void 0:_meal$foods.map((food,foodIndex)=>/*#__PURE__*/_jsxs(\"li\",{children:[\"\\u2022 \",food]},foodIndex))}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-gray-500 dark:text-gray-500 mt-2\",children:[meal.calories,\" cal | \",meal.preparation_time]})]},mealIndex);})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3 text-sm text-orange-600 dark:text-orange-400\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Focus:\"}),\" \",day.nutritional_focus,\" | \",/*#__PURE__*/_jsx(\"strong\",{children:\"Total:\"}),\" \",day.total_calories,\" calories\"]})]},index);}),recommendations.dietChart.general_guidelines&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-orange-50 dark:bg-orange-900/20 rounded-lg p-4\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-orange-800 dark:text-orange-200 mb-2\",children:\"General Guidelines:\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"text-sm text-orange-700 dark:text-orange-300 space-y-1\",children:recommendations.dietChart.general_guidelines.map((guideline,index)=>/*#__PURE__*/_jsxs(\"li\",{children:[\"\\u2022 \",guideline]},index))})]})]})]}),(recommendations===null||recommendations===void 0?void 0:recommendations.exercisePlan)&&/*#__PURE__*/_jsxs(\"div\",{className:\"glass-card rounded-2xl p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-4\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-xl font-semibold text-gray-800 dark:text-gray-200 flex items-center\",children:[/*#__PURE__*/_jsx(Activity,{className:\"w-6 h-6 mr-2 text-green-600\"}),\"Weekly Exercise Plan\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center space-x-2\",children:!calendarIntegration.authorized?/*#__PURE__*/_jsxs(\"button\",{onClick:handleGoogleCalendarAuth,disabled:calendarIntegration.loading,className:\"btn-sm btn-primary flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(Calendar,{className:\"w-4 h-4\"}),/*#__PURE__*/_jsx(\"span\",{children:calendarIntegration.loading?'Connecting...':'Connect Google Calendar'})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-1 text-green-600\",children:[/*#__PURE__*/_jsx(CheckCircle,{className:\"w-4 h-4\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm\",children:\"Calendar Connected\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:createCalendarEvents,disabled:calendarIntegration.loading,className:\"btn-sm btn-secondary flex items-center space-x-1\",children:[/*#__PURE__*/_jsx(Calendar,{className:\"w-4 h-4\"}),/*#__PURE__*/_jsx(\"span\",{children:calendarIntegration.loading?'Creating...':'Schedule All'})]})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[(_recommendations$exer2=recommendations.exercisePlan.weekly_plan)===null||_recommendations$exer2===void 0?void 0:_recommendations$exer2.map((week,weekIndex)=>{var _week$exercises;return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-green-50 dark:bg-green-900/20 rounded-lg p-4\",children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"font-medium text-green-800 dark:text-green-200 mb-3\",children:[\"Week \",week.week_number]}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3\",children:(_week$exercises=week.exercises)===null||_week$exercises===void 0?void 0:_week$exercises.map((exercise,exerciseIndex)=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white dark:bg-gray-800 rounded-lg p-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-start mb-2\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"font-medium text-green-700 dark:text-green-300\",children:exercise.name}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>scheduleToCalendar('Exercise',exercise),className:\"btn-sm btn-secondary flex items-center space-x-1\",children:[/*#__PURE__*/_jsx(Calendar,{className:\"w-4 h-4\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Schedule\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-2 text-sm text-gray-600 dark:text-gray-400 mb-2\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Type:\"}),\" \",exercise.type]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Duration:\"}),\" \",exercise.duration]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Intensity:\"}),\" \",exercise.intensity]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Frequency:\"}),\" \",exercise.frequency]})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-green-600 dark:text-green-400 mb-2\",children:exercise.description}),exercise.benefits&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-green-700 dark:text-green-300 mb-2\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Benefits:\"}),\" \",exercise.benefits.join(', ')]}),exercise.precautions&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-orange-600 dark:text-orange-400\",children:[/*#__PURE__*/_jsx(AlertCircle,{className:\"w-4 h-4 inline mr-1\"}),/*#__PURE__*/_jsx(\"strong\",{children:\"Precautions:\"}),\" \",exercise.precautions.join(', ')]})]},exerciseIndex))})]},weekIndex);}),recommendations.exercisePlan.general_guidelines&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-green-50 dark:bg-green-900/20 rounded-lg p-4\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-green-800 dark:text-green-200 mb-2\",children:\"General Guidelines:\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"text-sm text-green-700 dark:text-green-300 space-y-1\",children:recommendations.exercisePlan.general_guidelines.map((guideline,index)=>/*#__PURE__*/_jsxs(\"li\",{children:[\"\\u2022 \",guideline]},index))})]}),calendarIntegration.events.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-gray-800 dark:text-gray-200 mb-2\",children:\"Scheduled Events:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-2\",children:calendarIntegration.events.map((event,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-green-50 dark:bg-green-900/20 p-3 rounded-lg\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-medium text-green-800 dark:text-green-200\",children:event.exercise_name}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-green-600 dark:text-green-400\",children:[event.date,\" at \",event.time]}),event.event_link&&/*#__PURE__*/_jsx(\"a\",{href:event.event_link,target:\"_blank\",rel:\"noopener noreferrer\",className:\"text-xs text-blue-600 dark:text-blue-400 hover:underline\",children:\"View in Google Calendar\"})]},index))})]})]})]}),(recommendations===null||recommendations===void 0?void 0:recommendations.dietary_recommendations)&&/*#__PURE__*/_jsxs(\"div\",{className:\"glass-card rounded-2xl p-6\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-xl font-semibold text-gray-800 dark:text-gray-200 flex items-center mb-4\",children:[/*#__PURE__*/_jsx(Utensils,{className:\"w-6 h-6 mr-2 text-orange-600\"}),\"Dietary Recommendations\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:((_recommendations$diet2=recommendations.dietary_recommendations.foods)===null||_recommendations$diet2===void 0?void 0:_recommendations$diet2.map((food,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-orange-50 dark:bg-orange-900/20 rounded-lg p-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-start mb-2\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-orange-800 dark:text-orange-200\",children:food.category}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>scheduleToCalendar('Diet Plan',food),className:\"btn-sm btn-secondary flex items-center space-x-1\",children:[/*#__PURE__*/_jsx(Calendar,{className:\"w-4 h-4\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Schedule\"})]})]}),food.recommended&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-green-700 dark:text-green-300 mb-1\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Recommended:\"}),\" \",food.recommended.join(', ')]}),food.avoid&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-red-700 dark:text-red-300 mb-1\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Avoid:\"}),\" \",food.avoid.join(', ')]}),food.notes&&/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-orange-600 dark:text-orange-400\",children:food.notes})]},index)))||/*#__PURE__*/_jsx(\"div\",{className:\"bg-orange-50 dark:bg-orange-900/20 rounded-lg p-4\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-orange-700 dark:text-orange-300\",children:recommendations.dietary_recommendations})})})]})]});};return/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-4xl mx-auto p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mb-8\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-3xl font-bold text-gray-800 dark:text-gray-200 mb-2\",children:\"AI-Powered Prescription Analysis\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 dark:text-gray-400\",children:\"Upload your prescription for intelligent disease diagnosis and personalized health recommendations\"})]}),renderStepIndicator(),renderUploadSection(),(ocrText||analysisResult)&&renderAnalysisSection(),showHealthAnalysis&&recommendations&&/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:\"mt-8 space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"glass-card rounded-2xl p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-4\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-xl font-semibold text-gray-800 dark:text-gray-200 flex items-center\",children:[/*#__PURE__*/_jsx(Activity,{className:\"w-6 h-6 mr-2 text-blue-600\"}),\"Health Analysis & Daily Schedule\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowHealthAnalysis(false),className:\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200\",children:/*#__PURE__*/_jsx(X,{className:\"w-5 h-5\"})})]}),recommendations.diseases&&recommendations.diseases.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-blue-800 dark:text-blue-200 mb-2\",children:\"Detected Conditions:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-wrap gap-2\",children:recommendations.diseases.map((disease,index)=>/*#__PURE__*/_jsx(\"span\",{className:\"px-3 py-1 bg-blue-100 dark:bg-blue-800 text-blue-800 dark:text-blue-200 rounded-full text-sm\",children:disease},index))})]})]}),renderRecommendations()]}),currentStep==='recommendations'&&!showHealthAnalysis&&renderRecommendations(),error&&/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},className:\"mt-4 p-4 bg-red-50 dark:bg-red-900/20 rounded-lg border border-red-200 dark:border-red-800\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2 text-red-700 dark:text-red-300\",children:[/*#__PURE__*/_jsx(AlertCircle,{className:\"w-5 h-5\"}),/*#__PURE__*/_jsx(\"span\",{children:error})]})}),isProcessing&&/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},className:\"mt-4 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"typing-indicator\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"typing-dot\"}),/*#__PURE__*/_jsx(\"div\",{className:\"typing-dot\"}),/*#__PURE__*/_jsx(\"div\",{className:\"typing-dot\"})]}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-blue-700 dark:text-blue-300\",children:currentStep==='ocr'?'Extracting text from prescription...':currentStep==='analysis'?'Analyzing medical conditions...':'Processing your request...'})]})})]});};export default PrescriptionUpload;","map":{"version":3,"names":["React","useState","useCallback","motion","AnimatePresence","useDropzone","Upload","Camera","FileText","X","Image","ImageIcon","Stethoscope","Activity","Calendar","Utensils","AlertCircle","CheckCircle","Clock","Brain","Dumbbell","useHealth","prescriptionAPI","calendarAPI","healthAPI","jsx","_jsx","jsxs","_jsxs","PrescriptionUpload","_ref","onProcessPrescription","extractedText","medicines","onClearResults","user","processPrescription","uploadedFile","setUploadedFile","preview","setPreview","fileName","setFileName","isProcessing","setIsProcessing","ocrText","setOcrText","analysisResult","setAnalysisResult","recommendations","setRecommendations","error","setError","currentStep","setCurrentStep","showHealthAnalysis","setShowHealthAnalysis","onDrop","acceptedFiles","file","name","reader","FileReader","onload","result","readAsDataURL","getRootProps","getInputProps","isDragActive","accept","multiple","clearFile","processOCR","formData","FormData","append","response","extractText","success","text","message","err","handleHealthAnalysisClick","enhancedRecommendations","getPersonalizedRecommendations","scheduleHealthEvents","handleHealthAnalysis","ocrResponse","analysisResponse","uploadPrescription","prescription_text","image_reference","metadata","upload_timestamp","Date","toISOString","file_type","type","file_size","size","analysis","diagnoseDiseases","prescription_id","integration_summary","recommendations_created","dashboard_entries_created","conditions_detected","prescriptionData","ocr_text","timestamp","integration_status","_analysisResult$extra","detectedDiseases","extracted_info","conditions","length","console","warn","dietResponse","exerciseResponse","Promise","all","getDayWiseDietChart","detected_diseases","user_preferences","duration_days","getDiseaseBasedExercisePlan","fitness_level","available_time","diseases","dietChart","exercisePlan","analysisData","_analysisData$extract","_analysisData$extract2","_analysisData$extract3","_analysisData$extract4","token","localStorage","getItem","medications","medicine","dosage","frequency","createMedicationReminder","medical_conditions","scheduleFollowUpAppointment","createEvent","title","description","start_time","now","duration_minutes","recurrence","toLowerCase","includes","log","data","join","calendarIntegration","setCalendarIntegration","authorized","loading","events","credentials","handleGoogleCalendarAuth","prev","getAuthUrl","state","authWindow","window","open","authorization_url","checkClosed","setInterval","closed","clearInterval","JSON","parse","removeItem","createCalendarEvents","exercise_recommendations","_recommendations$exer","weekly_schedule","exercises","map","exercise","index","day","duration","intensity","createExerciseEvents","exercise_plan","timezone","Intl","DateTimeFormat","resolvedOptions","timeZone","created_events","alert","Error","scheduleToCalendar","item","category","notes","renderStepIndicator","steps","id","label","icon","stepIndex","findIndex","step","className","children","Icon","isActive","isCurrent","Fragment","renderUploadSection","div","initial","opacity","y","animate","mode","exit","scale","endsWith","src","alt","onClick","e","stopPropagation","button","disabled","whileHover","whileTap","renderAnalysisSection","_analysisResult$extra2","_analysisResult$extra3","_analysisResult$extra4","_analysisResult$extra5","condition","med","renderRecommendations","_recommendations$diet","_recommendations$exer2","_recommendations$diet2","diet_plan","_day$meals","day_name","meals","meal","mealIndex","_meal$foods","meal_type","foods","food","foodIndex","calories","preparation_time","nutritional_focus","total_calories","general_guidelines","guideline","weekly_plan","week","weekIndex","_week$exercises","week_number","exerciseIndex","benefits","precautions","event","exercise_name","date","time","event_link","href","target","rel","dietary_recommendations","recommended","avoid","disease"],"sources":["/Users/darshiyer/Desktop/DeadPool/Downloads/Tsunade/Tsunade/frontend/src/components/PrescriptionUpload.jsx"],"sourcesContent":["import React, { useState, useCallback } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { useDropzone } from 'react-dropzone';\nimport { \n  Upload, \n  Camera, \n  FileText, \n  X, \n  Image as ImageIcon, \n  Stethoscope, \n  Activity, \n  Calendar,\n  Utensils,\n  AlertCircle,\n  CheckCircle,\n  Clock,\n  Brain,\n  Dumbbell\n} from 'lucide-react';\nimport { useHealth } from '../contexts/HealthContext';\nimport { prescriptionAPI, calendarAPI, healthAPI } from '../services/apiService';\n\nconst PrescriptionUpload = ({ onProcessPrescription, extractedText, medicines, onClearResults }) => {\n  const { user, processPrescription } = useHealth();\n  const [uploadedFile, setUploadedFile] = useState(null);\n  const [preview, setPreview] = useState(null);\n  const [fileName, setFileName] = useState('');\n  const [isProcessing, setIsProcessing] = useState(false);\n  const [ocrText, setOcrText] = useState('');\n  const [analysisResult, setAnalysisResult] = useState(null);\n  const [recommendations, setRecommendations] = useState(null);\n  const [error, setError] = useState('');\n  const [currentStep, setCurrentStep] = useState('upload'); // upload, ocr, analysis, recommendations\n  const [showHealthAnalysis, setShowHealthAnalysis] = useState(false);\n\n  const onDrop = useCallback((acceptedFiles) => {\n    const file = acceptedFiles[0];\n    if (file) {\n      setUploadedFile(file);\n      setFileName(file.name);\n      setError('');\n      \n      // Create preview\n      const reader = new FileReader();\n      reader.onload = () => {\n        setPreview(reader.result);\n      };\n      reader.readAsDataURL(file);\n      \n      setCurrentStep('upload');\n    }\n  }, []);\n\n  const { getRootProps, getInputProps, isDragActive } = useDropzone({\n    onDrop,\n    accept: {\n      'image/*': ['.jpeg', '.jpg', '.png', '.gif', '.bmp'],\n      'application/pdf': ['.pdf']\n    },\n    multiple: false\n  });\n\n  const clearFile = () => {\n    setUploadedFile(null);\n    setPreview(null);\n    setFileName('');\n    setOcrText('');\n    setAnalysisResult(null);\n    setRecommendations(null);\n    setError('');\n    setCurrentStep('upload');\n  };\n\n  const processOCR = async () => {\n    if (!uploadedFile) {\n      setError('Please upload a file first');\n      return;\n    }\n\n    setIsProcessing(true);\n    setError('');\n    setCurrentStep('ocr');\n\n    try {\n      const formData = new FormData();\n      formData.append('file', uploadedFile);\n\n      const response = await prescriptionAPI.extractText(formData);\n\n      if (response.success) {\n        setOcrText(response.text);\n        setCurrentStep('analysis');\n      } else {\n        setError(response.message || 'Failed to extract text from image');\n      }\n    } catch (err) {\n      setError('Error processing image: ' + err.message);\n    } finally {\n      setIsProcessing(false);\n    }\n  };\n\n  const handleHealthAnalysisClick = async () => {\n    if (!analysisResult) {\n      setError('Please upload and analyze a prescription first');\n      return;\n    }\n    \n    setShowHealthAnalysis(true);\n    setIsProcessing(true);\n    setError('');\n\n    try {\n      // Get enhanced recommendations based on detected diseases\n      const enhancedRecommendations = await getPersonalizedRecommendations(analysisResult);\n      \n      if (enhancedRecommendations) {\n        setRecommendations(enhancedRecommendations);\n        \n        // Schedule health events in the background\n        await scheduleHealthEvents(analysisResult);\n        \n        // Update health context\n        await processPrescription({\n          ...analysisResult,\n          recommendations: enhancedRecommendations\n        });\n        \n        setCurrentStep('recommendations');\n      } else {\n        setError('Unable to generate health recommendations. Please try again.');\n      }\n    } catch (err) {\n      setError('Error generating health analysis: ' + err.message);\n    } finally {\n      setIsProcessing(false);\n    }\n  };\n\n  const handleHealthAnalysis = async () => {\n    if (!uploadedFile) {\n      setError('Please upload a prescription first');\n      return;\n    }\n\n    setIsProcessing(true);\n    setError('');\n    setCurrentStep('ocr');\n\n    try {\n      // First extract text from the prescription\n      const formData = new FormData();\n      formData.append('file', uploadedFile);\n\n      const ocrResponse = await prescriptionAPI.extractText(formData);\n\n      if (!ocrResponse.success) {\n        setError(ocrResponse.message || 'Failed to extract text from prescription');\n        return;\n      }\n\n      setOcrText(ocrResponse.text);\n      setCurrentStep('analysis');\n\n      // Perform comprehensive health analysis\n      const analysisResponse = await prescriptionAPI.uploadPrescription({\n        prescription_text: ocrResponse.text,\n        image_reference: fileName,\n        metadata: {\n          upload_timestamp: new Date().toISOString(),\n          file_type: uploadedFile?.type,\n          file_size: uploadedFile?.size\n        }\n      });\n\n      if (analysisResponse.success) {\n        setAnalysisResult(analysisResponse.analysis);\n        \n        // Get enhanced personalized recommendations including diet and exercise\n        const enhancedRecommendations = await getPersonalizedRecommendations(analysisResponse.analysis);\n        \n        if (enhancedRecommendations) {\n          setRecommendations(enhancedRecommendations);\n          \n          // Schedule health events in calendar\n          await scheduleHealthEvents(analysisResponse.analysis);\n          \n          setCurrentStep('recommendations');\n        } else {\n          setError('Failed to generate personalized recommendations');\n        }\n      } else {\n        setError(analysisResponse.message || 'Failed to analyze prescription');\n      }\n    } catch (err) {\n      setError('Error during health analysis: ' + err.message);\n    } finally {\n      setIsProcessing(false);\n    }\n  };\n\n  const diagnoseDiseases = async () => {\n    if (!ocrText) {\n      setError('No text available for analysis');\n      return;\n    }\n\n    setIsProcessing(true);\n    setError('');\n\n    try {\n      // Use the new integrated prescription processing endpoint\n      const response = await prescriptionAPI.uploadPrescription({\n        prescription_text: ocrText,\n        image_reference: fileName,\n        metadata: {\n          upload_timestamp: new Date().toISOString(),\n          file_type: uploadedFile?.type,\n          file_size: uploadedFile?.size\n        }\n      });\n\n      if (response.success) {\n        // The new endpoint handles everything: analysis, recommendations, and dashboard integration\n        setAnalysisResult({\n          prescription_id: response.prescription_id,\n          integration_summary: response.integration_summary,\n          recommendations_created: response.recommendations_created,\n          dashboard_entries_created: response.dashboard_entries_created,\n          conditions_detected: response.conditions_detected\n        });\n        \n        const prescriptionData = {\n          prescription_id: response.prescription_id,\n          ocr_text: ocrText,\n          timestamp: new Date().toISOString(),\n          integration_status: 'completed'\n        };\n        \n        // Use context to update local state\n        await processPrescription(prescriptionData);\n        \n        if (onProcessPrescription) {\n          onProcessPrescription(prescriptionData);\n        }\n        \n        setCurrentStep('recommendations');\n      } else {\n        setError(response.message || 'Failed to process prescription');\n      }\n    } catch (err) {\n      setError('Error processing prescription: ' + err.message);\n    } finally {\n      setIsProcessing(false);\n    }\n  };\n\n  const getPersonalizedRecommendations = async (analysisResult) => {\n    try {\n      // Extract detected diseases from analysis result\n      const detectedDiseases = analysisResult?.extracted_info?.conditions || \n                              analysisResult?.conditions_detected || \n                              [];\n      \n      if (detectedDiseases.length === 0) {\n        console.warn('No diseases detected for recommendations');\n        return null;\n      }\n\n      // Get comprehensive health recommendations including diet and exercise\n      const [dietResponse, exerciseResponse] = await Promise.all([\n        // Get day-wise diet chart\n        healthAPI.getDayWiseDietChart({\n          detected_diseases: detectedDiseases,\n          user_preferences: {},\n          duration_days: 7\n        }),\n        // Get disease-based exercise plan\n        healthAPI.getDiseaseBasedExercisePlan({\n          detected_diseases: detectedDiseases,\n          user_preferences: {},\n          fitness_level: \"beginner\",\n          available_time: 30\n        })\n      ]);\n\n      return {\n        diseases: detectedDiseases,\n        dietChart: dietResponse?.success ? dietResponse : null,\n        exercisePlan: exerciseResponse?.success ? exerciseResponse : null,\n        timestamp: new Date().toISOString()\n      };\n    } catch (error) {\n      console.error('Error getting personalized recommendations:', error);\n      return null;\n    }\n  };\n\n  const scheduleHealthEvents = async (analysisData) => {\n    try {\n      const token = localStorage.getItem('access_token');\n      if (!token) return;\n\n      // Create medication reminders\n      if (analysisData?.extracted_info?.medications?.length > 0) {\n        for (const medicine of analysisData.extracted_info.medications) {\n          if (medicine.dosage && medicine.frequency) {\n            await createMedicationReminder(medicine);\n          }\n        }\n      }\n\n      // Schedule follow-up appointments if conditions are detected\n      if (analysisData?.extracted_info?.medical_conditions?.length > 0) {\n        await scheduleFollowUpAppointment(analysisData.extracted_info.medical_conditions);\n      }\n\n    } catch (error) {\n      console.error('Error scheduling health events:', error);\n    }\n  };\n\n  const createMedicationReminder = async (medicine) => {\n     try {\n       const response = await calendarAPI.createEvent({\n         title: `Take ${medicine.name}`,\n         description: `Medication reminder: ${medicine.name} - ${medicine.dosage}\\nFrequency: ${medicine.frequency}`,\n         start_time: new Date(Date.now() + 24 * 60 * 60 * 1000).toISOString(),\n         duration_minutes: 15,\n         recurrence: medicine.frequency && medicine.frequency.toLowerCase().includes('daily') ? 'daily' : null\n       });\n \n       if (response.success) {\n         console.log(`Medication reminder created for ${medicine.name}:`, response.data);\n       }\n     } catch (error) {\n       console.error('Error creating medication reminder:', error);\n     }\n   };\n\n  const scheduleFollowUpAppointment = async (conditions) => {\n     try {\n       const response = await calendarAPI.createEvent({\n         title: 'Follow-up Medical Appointment',\n         description: `Follow-up appointment for: ${conditions.join(', ')}\\nScheduled based on prescription analysis`,\n         start_time: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000).toISOString(),\n         duration_minutes: 60\n       });\n \n       if (response.success) {\n         console.log('Follow-up appointment scheduled:', response.data);\n       }\n     } catch (error) {\n       console.error('Error scheduling follow-up appointment:', error);\n     }\n   };\n\n  const [calendarIntegration, setCalendarIntegration] = useState({\n    authorized: false,\n    loading: false,\n    events: [],\n    credentials: null\n  });\n\n  // Google Calendar Integration\n  const handleGoogleCalendarAuth = async () => {\n    setCalendarIntegration(prev => ({ ...prev, loading: true }));\n\n    try {\n      const response = await calendarAPI.getAuthUrl({ state: 'prescription_analysis' });\n\n      if (response.success) {\n        // Open Google OAuth in a new window\n        const authWindow = window.open(\n          response.authorization_url, \n          'google-auth', \n          'width=500,height=600,scrollbars=yes,resizable=yes'\n        );\n        \n        // Listen for the auth completion\n        const checkClosed = setInterval(() => {\n          if (authWindow.closed) {\n            clearInterval(checkClosed);\n            // Check if auth was successful by checking localStorage or making a status call\n            const credentials = localStorage.getItem('google_calendar_credentials');\n            if (credentials) {\n              setCalendarIntegration(prev => ({ \n                ...prev, \n                authorized: true, \n                loading: false,\n                credentials: JSON.parse(credentials)\n              }));\n              localStorage.removeItem('google_calendar_credentials');\n            } else {\n              setCalendarIntegration(prev => ({ ...prev, loading: false }));\n            }\n          }\n        }, 1000);\n      }\n    } catch (err) {\n      console.error('Error with Google Calendar auth:', err);\n      setCalendarIntegration(prev => ({ ...prev, loading: false }));\n    }\n  };\n\n  const createCalendarEvents = async () => {\n    if (!recommendations?.exercise_recommendations || !calendarIntegration.authorized || !calendarIntegration.credentials) return;\n\n    setCalendarIntegration(prev => ({ ...prev, loading: true }));\n\n    try {\n      // Format exercise plan for the API\n      const exercisePlan = {\n        weekly_schedule: recommendations.exercise_recommendations.exercises?.map((exercise, index) => ({\n          day: ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'][index % 7],\n          exercises: [{\n            name: exercise.name,\n            duration: exercise.duration || '30 minutes',\n            intensity: exercise.intensity || 'moderate',\n            description: exercise.description || ''\n          }]\n        })) || []\n      };\n\n      const response = await calendarAPI.createExerciseEvents({\n        credentials: calendarIntegration.credentials,\n        exercise_plan: exercisePlan,\n        timezone: Intl.DateTimeFormat().resolvedOptions().timeZone\n      });\n\n      if (response.success) {\n        setCalendarIntegration(prev => ({ \n          ...prev, \n          events: response.created_events,\n          loading: false \n        }));\n        alert(`Successfully created ${response.created_events.length} calendar events!`);\n      } else {\n        throw new Error('Failed to create calendar events');\n      }\n    } catch (err) {\n      console.error('Error creating calendar events:', err);\n      setCalendarIntegration(prev => ({ ...prev, loading: false }));\n      alert('Failed to create calendar events. Please try again.');\n    }\n  };\n\n  const scheduleToCalendar = async (type, item) => {\n    try {\n      const response = await calendarAPI.createEvent({\n        title: `${type}: ${item.name || item.category}`,\n        description: item.description || item.notes || '',\n        start_time: new Date(Date.now() + 24 * 60 * 60 * 1000).toISOString(), // Tomorrow\n        duration_minutes: type === 'Exercise' ? 30 : 60\n      });\n\n      if (response.success) {\n        alert(`${type} scheduled successfully!`);\n      } else {\n        alert(`Failed to schedule ${type}`);\n      }\n    } catch (err) {\n      alert(`Error scheduling ${type}: ${err.message}`);\n    }\n  };\n\n  const renderStepIndicator = () => {\n    const steps = [\n      { id: 'upload', label: 'Upload', icon: Upload },\n      { id: 'ocr', label: 'Extract Text', icon: FileText },\n      { id: 'analysis', label: 'Diagnose', icon: Stethoscope },\n      { id: 'recommendations', label: 'Recommendations', icon: Activity }\n    ];\n\n    const stepIndex = steps.findIndex(step => step.id === currentStep);\n\n    return (\n      <div className=\"flex items-center justify-center mb-6\">\n        {steps.map((step, index) => {\n          const Icon = step.icon;\n          const isActive = index <= stepIndex;\n          const isCurrent = step.id === currentStep;\n          \n          return (\n            <React.Fragment key={step.id}>\n              <div className={`flex items-center justify-center w-10 h-10 rounded-full ${\n                isActive ? 'bg-primary-500 text-white' : 'bg-gray-200 text-gray-500'\n              } ${isCurrent ? 'ring-2 ring-primary-300' : ''}`}>\n                <Icon className=\"w-5 h-5\" />\n              </div>\n              {index < steps.length - 1 && (\n                <div className={`w-12 h-1 mx-2 ${\n                  index < stepIndex ? 'bg-primary-500' : 'bg-gray-200'\n                }`} />\n              )}\n            </React.Fragment>\n          );\n        })}\n      </div>\n    );\n  };\n\n  const renderUploadSection = () => (\n    <motion.div\n      initial={{ opacity: 0, y: 20 }}\n      animate={{ opacity: 1, y: 0 }}\n      className=\"glass-card rounded-2xl p-6\"\n    >\n      <div className=\"text-center mb-6\">\n        <h3 className=\"text-xl font-semibold text-gray-800 dark:text-gray-200 mb-2\">\n          Upload Prescription\n        </h3>\n        <p className=\"text-sm text-gray-600 dark:text-gray-400\">\n          Drag & drop your prescription image or click to browse\n        </p>\n      </div>\n\n      <div\n        {...getRootProps()}\n        className={`upload-zone ${isDragActive ? 'upload-zone-active' : ''} ${\n          isProcessing ? 'pointer-events-none opacity-50' : ''\n        }`}\n      >\n        <input {...getInputProps()} />\n        \n        <AnimatePresence mode=\"wait\">\n          {!preview ? (\n            <motion.div\n              key=\"upload-prompt\"\n              initial={{ opacity: 0 }}\n              animate={{ opacity: 1 }}\n              exit={{ opacity: 0 }}\n              className=\"space-y-4\"\n            >\n              <div className=\"flex justify-center\">\n                <div className=\"w-16 h-16 bg-gradient-to-r from-primary-100 to-secondary-100 dark:from-primary-900/20 dark:to-secondary-900/20 rounded-full flex items-center justify-center\">\n                  <Upload className=\"w-8 h-8 text-primary-600 dark:text-primary-400\" />\n                </div>\n              </div>\n              \n              <div>\n                <p className=\"text-lg font-medium text-gray-800 dark:text-gray-200 mb-2\">\n                  {isDragActive ? 'Drop your file here' : 'Choose a file or drag it here'}\n                </p>\n                <p className=\"text-sm text-gray-600 dark:text-gray-400\">\n                  Supports JPG, PNG, GIF, BMP, and PDF files\n                </p>\n              </div>\n            </motion.div>\n          ) : (\n            <motion.div\n              key=\"preview\"\n              initial={{ opacity: 0, scale: 0.9 }}\n              animate={{ opacity: 1, scale: 1 }}\n              exit={{ opacity: 0, scale: 0.9 }}\n              className=\"space-y-4\"\n            >\n              <div className=\"relative\">\n                {fileName.toLowerCase().endsWith('.pdf') ? (\n                  <div className=\"w-full h-32 bg-gradient-to-r from-red-100 to-red-200 dark:from-red-900/20 dark:to-red-800/20 rounded-lg flex items-center justify-center\">\n                    <FileText className=\"w-12 h-12 text-red-500\" />\n                  </div>\n                ) : (\n                  <img \n                    src={preview} \n                    alt=\"Preview\" \n                    className=\"w-full h-32 object-cover rounded-lg\"\n                  />\n                )}\n                \n                <button\n                  onClick={(e) => {\n                    e.stopPropagation();\n                    clearFile();\n                  }}\n                  className=\"absolute -top-2 -right-2 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center hover:bg-red-600 transition-colors\"\n                >\n                  <X className=\"w-4 h-4\" />\n                </button>\n              </div>\n              \n              <div className=\"text-center\">\n                <p className=\"text-sm font-medium text-gray-800 dark:text-gray-200\">\n                  {fileName}\n                </p>\n                <p className=\"text-xs text-gray-600 dark:text-gray-400\">\n                  Click to change file\n                </p>\n              </div>\n            </motion.div>\n          )}\n        </AnimatePresence>\n      </div>\n\n      {preview && (\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3 mt-6\">\n          <motion.button\n            onClick={processOCR}\n            disabled={isProcessing}\n            className=\"btn-primary flex items-center justify-center space-x-2\"\n            whileHover={{ scale: 1.02 }}\n            whileTap={{ scale: 0.98 }}\n          >\n            <FileText className=\"w-4 h-4\" />\n            <span>{isProcessing ? 'Processing...' : 'Extract Text'}</span>\n          </motion.button>\n          \n          <motion.button\n            onClick={handleHealthAnalysisClick}\n            disabled={!analysisResult || isProcessing}\n            className={`flex items-center justify-center space-x-2 px-4 py-2 rounded-lg font-medium transition-all duration-200 ${\n              !analysisResult || isProcessing\n                ? 'bg-gray-300 text-gray-500 cursor-not-allowed'\n                : 'bg-gradient-to-r from-emerald-500 to-teal-600 text-white hover:from-emerald-600 hover:to-teal-700 shadow-lg hover:shadow-xl'\n            }`}\n            whileHover={!analysisResult || isProcessing ? {} : { scale: 1.02 }}\n            whileTap={!analysisResult || isProcessing ? {} : { scale: 0.98 }}\n          >\n            <Activity className=\"w-4 h-4\" />\n            <span>{isProcessing ? 'Analyzing...' : 'Health Analysis'}</span>\n          </motion.button>\n        </div>\n      )}\n    </motion.div>\n  );\n\n  const renderAnalysisSection = () => (\n    <motion.div\n      initial={{ opacity: 0, y: 20 }}\n      animate={{ opacity: 1, y: 0 }}\n      className=\"glass-card rounded-2xl p-6 mt-6\"\n    >\n      <div className=\"flex items-center justify-between mb-4\">\n        <h3 className=\"text-xl font-semibold text-gray-800 dark:text-gray-200 flex items-center\">\n          <Brain className=\"w-6 h-6 mr-2 text-primary-600\" />\n          AI Analysis\n        </h3>\n        {ocrText && (\n          <motion.button\n            onClick={diagnoseDiseases}\n            disabled={isProcessing}\n            className=\"btn-primary flex items-center space-x-2\"\n            whileHover={{ scale: 1.02 }}\n            whileTap={{ scale: 0.98 }}\n          >\n            <Stethoscope className=\"w-4 h-4\" />\n            <span>{isProcessing ? 'Diagnosing...' : 'Diagnose Disease'}</span>\n          </motion.button>\n        )}\n      </div>\n\n      {ocrText && (\n        <div className=\"mb-4\">\n          <h4 className=\"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">Extracted Text:</h4>\n          <div className=\"bg-gray-50 dark:bg-gray-800 rounded-lg p-3 text-sm text-gray-700 dark:text-gray-300 max-h-32 overflow-y-auto\">\n            {ocrText}\n          </div>\n        </div>\n      )}\n\n      {analysisResult && (\n        <div className=\"space-y-4\">\n          <div className=\"flex items-center space-x-2 text-green-600\">\n            <CheckCircle className=\"w-5 h-5\" />\n            <span className=\"font-medium\">{analysisResult.message}</span>\n          </div>\n\n          {analysisResult?.extracted_info?.medical_conditions?.length > 0 && (\n            <div>\n              <h4 className=\"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">Detected Conditions:</h4>\n              <div className=\"flex flex-wrap gap-2\">\n                {analysisResult.extracted_info.medical_conditions.map((condition, index) => (\n                  <span key={index} className=\"px-3 py-1 bg-red-100 text-red-800 rounded-full text-sm\">\n                    {condition}\n                  </span>\n                ))}\n              </div>\n            </div>\n          )}\n\n          {analysisResult?.extracted_info?.medications?.length > 0 && (\n            <div>\n              <h4 className=\"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">Medications:</h4>\n              <div className=\"space-y-2\">\n                {analysisResult.extracted_info.medications.map((med, index) => (\n                  <div key={index} className=\"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-3\">\n                    <div className=\"font-medium text-blue-800 dark:text-blue-200\">{med.name}</div>\n                    {med.dosage && <div className=\"text-sm text-blue-600 dark:text-blue-300\">Dosage: {med.dosage}</div>}\n                    {med.frequency && <div className=\"text-sm text-blue-600 dark:text-blue-300\">Frequency: {med.frequency}</div>}\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n        </div>\n      )}\n    </motion.div>\n  );\n\n  const renderRecommendations = () => (\n    <motion.div\n      initial={{ opacity: 0, y: 20 }}\n      animate={{ opacity: 1, y: 0 }}\n      className=\"space-y-6 mt-6\"\n    >\n      {/* Diet Chart Section */}\n      {recommendations?.dietChart && (\n        <div className=\"glass-card rounded-2xl p-6\">\n          <div className=\"flex justify-between items-center mb-4\">\n            <h3 className=\"text-xl font-semibold text-gray-800 dark:text-gray-200 flex items-center\">\n              <Utensils className=\"w-6 h-6 mr-2 text-orange-600\" />\n              7-Day Diet Chart\n            </h3>\n          </div>\n          \n          <div className=\"space-y-4\">\n            {recommendations.dietChart.diet_plan?.map((day, index) => (\n              <div key={index} className=\"bg-orange-50 dark:bg-orange-900/20 rounded-lg p-4\">\n                <h4 className=\"font-medium text-orange-800 dark:text-orange-200 mb-3\">\n                  Day {day.day} - {day.day_name}\n                </h4>\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3\">\n                  {day.meals?.map((meal, mealIndex) => (\n                    <div key={mealIndex} className=\"bg-white dark:bg-gray-800 rounded-lg p-3\">\n                      <h5 className=\"font-medium text-orange-700 dark:text-orange-300 capitalize mb-2\">\n                        {meal.meal_type}\n                      </h5>\n                      <ul className=\"text-sm text-gray-600 dark:text-gray-400 space-y-1\">\n                        {meal.foods?.map((food, foodIndex) => (\n                          <li key={foodIndex}>• {food}</li>\n                        ))}\n                      </ul>\n                      <div className=\"text-xs text-gray-500 dark:text-gray-500 mt-2\">\n                        {meal.calories} cal | {meal.preparation_time}\n                      </div>\n                    </div>\n                  ))}\n                </div>\n                <div className=\"mt-3 text-sm text-orange-600 dark:text-orange-400\">\n                  <strong>Focus:</strong> {day.nutritional_focus} | <strong>Total:</strong> {day.total_calories} calories\n                </div>\n              </div>\n            ))}\n            \n            {recommendations.dietChart.general_guidelines && (\n              <div className=\"bg-orange-50 dark:bg-orange-900/20 rounded-lg p-4\">\n                <h4 className=\"font-medium text-orange-800 dark:text-orange-200 mb-2\">General Guidelines:</h4>\n                <ul className=\"text-sm text-orange-700 dark:text-orange-300 space-y-1\">\n                  {recommendations.dietChart.general_guidelines.map((guideline, index) => (\n                    <li key={index}>• {guideline}</li>\n                  ))}\n                </ul>\n              </div>\n            )}\n          </div>\n        </div>\n      )}\n\n      {/* Exercise Plan Section */}\n      {recommendations?.exercisePlan && (\n        <div className=\"glass-card rounded-2xl p-6\">\n          <div className=\"flex justify-between items-center mb-4\">\n            <h3 className=\"text-xl font-semibold text-gray-800 dark:text-gray-200 flex items-center\">\n              <Activity className=\"w-6 h-6 mr-2 text-green-600\" />\n              Weekly Exercise Plan\n            </h3>\n            \n            {/* Google Calendar Integration */}\n            <div className=\"flex items-center space-x-2\">\n              {!calendarIntegration.authorized ? (\n                <button\n                  onClick={handleGoogleCalendarAuth}\n                  disabled={calendarIntegration.loading}\n                  className=\"btn-sm btn-primary flex items-center space-x-2\"\n                >\n                  <Calendar className=\"w-4 h-4\" />\n                  <span>{calendarIntegration.loading ? 'Connecting...' : 'Connect Google Calendar'}</span>\n                </button>\n              ) : (\n                <div className=\"flex items-center space-x-2\">\n                  <div className=\"flex items-center space-x-1 text-green-600\">\n                    <CheckCircle className=\"w-4 h-4\" />\n                    <span className=\"text-sm\">Calendar Connected</span>\n                  </div>\n                  <button\n                    onClick={createCalendarEvents}\n                    disabled={calendarIntegration.loading}\n                    className=\"btn-sm btn-secondary flex items-center space-x-1\"\n                  >\n                    <Calendar className=\"w-4 h-4\" />\n                    <span>{calendarIntegration.loading ? 'Creating...' : 'Schedule All'}</span>\n                  </button>\n                </div>\n              )}\n            </div>\n          </div>\n          \n          <div className=\"space-y-4\">\n            {recommendations.exercisePlan.weekly_plan?.map((week, weekIndex) => (\n              <div key={weekIndex} className=\"bg-green-50 dark:bg-green-900/20 rounded-lg p-4\">\n                <h4 className=\"font-medium text-green-800 dark:text-green-200 mb-3\">\n                  Week {week.week_number}\n                </h4>\n                <div className=\"space-y-3\">\n                  {week.exercises?.map((exercise, exerciseIndex) => (\n                    <div key={exerciseIndex} className=\"bg-white dark:bg-gray-800 rounded-lg p-3\">\n                      <div className=\"flex justify-between items-start mb-2\">\n                        <h5 className=\"font-medium text-green-700 dark:text-green-300\">{exercise.name}</h5>\n                        <button\n                          onClick={() => scheduleToCalendar('Exercise', exercise)}\n                          className=\"btn-sm btn-secondary flex items-center space-x-1\"\n                        >\n                          <Calendar className=\"w-4 h-4\" />\n                          <span>Schedule</span>\n                        </button>\n                      </div>\n                      <div className=\"grid grid-cols-2 gap-2 text-sm text-gray-600 dark:text-gray-400 mb-2\">\n                        <div><strong>Type:</strong> {exercise.type}</div>\n                        <div><strong>Duration:</strong> {exercise.duration}</div>\n                        <div><strong>Intensity:</strong> {exercise.intensity}</div>\n                        <div><strong>Frequency:</strong> {exercise.frequency}</div>\n                      </div>\n                      <p className=\"text-sm text-green-600 dark:text-green-400 mb-2\">{exercise.description}</p>\n                      {exercise.benefits && (\n                        <div className=\"text-sm text-green-700 dark:text-green-300 mb-2\">\n                          <strong>Benefits:</strong> {exercise.benefits.join(', ')}\n                        </div>\n                      )}\n                      {exercise.precautions && (\n                        <p className=\"text-sm text-orange-600 dark:text-orange-400\">\n                          <AlertCircle className=\"w-4 h-4 inline mr-1\" />\n                          <strong>Precautions:</strong> {exercise.precautions.join(', ')}\n                        </p>\n                      )}\n                    </div>\n                  ))}\n                </div>\n              </div>\n            ))}\n            \n            {recommendations.exercisePlan.general_guidelines && (\n              <div className=\"bg-green-50 dark:bg-green-900/20 rounded-lg p-4\">\n                <h4 className=\"font-medium text-green-800 dark:text-green-200 mb-2\">General Guidelines:</h4>\n                <ul className=\"text-sm text-green-700 dark:text-green-300 space-y-1\">\n                  {recommendations.exercisePlan.general_guidelines.map((guideline, index) => (\n                    <li key={index}>• {guideline}</li>\n                  ))}\n                </ul>\n              </div>\n            )}\n            \n            {calendarIntegration.events.length > 0 && (\n              <div className=\"mt-4\">\n                <h4 className=\"font-medium text-gray-800 dark:text-gray-200 mb-2\">Scheduled Events:</h4>\n                <div className=\"space-y-2\">\n                  {calendarIntegration.events.map((event, index) => (\n                    <div key={index} className=\"bg-green-50 dark:bg-green-900/20 p-3 rounded-lg\">\n                      <div className=\"font-medium text-green-800 dark:text-green-200\">{event.exercise_name}</div>\n                      <div className=\"text-sm text-green-600 dark:text-green-400\">\n                        {event.date} at {event.time}\n                      </div>\n                      {event.event_link && (\n                        <a \n                          href={event.event_link} \n                          target=\"_blank\" \n                          rel=\"noopener noreferrer\"\n                          className=\"text-xs text-blue-600 dark:text-blue-400 hover:underline\"\n                        >\n                          View in Google Calendar\n                        </a>\n                      )}\n                    </div>\n                  ))}\n                </div>\n              </div>\n            )}\n          </div>\n        </div>\n      )}\n\n      {recommendations?.dietary_recommendations && (\n        <div className=\"glass-card rounded-2xl p-6\">\n          <h3 className=\"text-xl font-semibold text-gray-800 dark:text-gray-200 flex items-center mb-4\">\n            <Utensils className=\"w-6 h-6 mr-2 text-orange-600\" />\n            Dietary Recommendations\n          </h3>\n          <div className=\"space-y-4\">\n            {recommendations.dietary_recommendations.foods?.map((food, index) => (\n              <div key={index} className=\"bg-orange-50 dark:bg-orange-900/20 rounded-lg p-4\">\n                <div className=\"flex justify-between items-start mb-2\">\n                  <h4 className=\"font-medium text-orange-800 dark:text-orange-200\">{food.category}</h4>\n                  <button\n                    onClick={() => scheduleToCalendar('Diet Plan', food)}\n                    className=\"btn-sm btn-secondary flex items-center space-x-1\"\n                  >\n                    <Calendar className=\"w-4 h-4\" />\n                    <span>Schedule</span>\n                  </button>\n                </div>\n                {food.recommended && (\n                  <p className=\"text-sm text-green-700 dark:text-green-300 mb-1\">\n                    <strong>Recommended:</strong> {food.recommended.join(', ')}\n                  </p>\n                )}\n                {food.avoid && (\n                  <p className=\"text-sm text-red-700 dark:text-red-300 mb-1\">\n                    <strong>Avoid:</strong> {food.avoid.join(', ')}\n                  </p>\n                )}\n                {food.notes && (\n                  <p className=\"text-sm text-orange-600 dark:text-orange-400\">{food.notes}</p>\n                )}\n              </div>\n            )) || (\n              <div className=\"bg-orange-50 dark:bg-orange-900/20 rounded-lg p-4\">\n                <p className=\"text-orange-700 dark:text-orange-300\">{recommendations.dietary_recommendations}</p>\n              </div>\n            )}\n          </div>\n        </div>\n      )}\n    </motion.div>\n  );\n\n  return (\n    <div className=\"max-w-4xl mx-auto p-6\">\n      <div className=\"text-center mb-8\">\n        <h2 className=\"text-3xl font-bold text-gray-800 dark:text-gray-200 mb-2\">\n          AI-Powered Prescription Analysis\n        </h2>\n        <p className=\"text-gray-600 dark:text-gray-400\">\n          Upload your prescription for intelligent disease diagnosis and personalized health recommendations\n        </p>\n      </div>\n\n      {renderStepIndicator()}\n      \n      {renderUploadSection()}\n      \n      {(ocrText || analysisResult) && renderAnalysisSection()}\n      \n      {/* Health Analysis Results - Compact Display */}\n      {showHealthAnalysis && recommendations && (\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          className=\"mt-8 space-y-6\"\n        >\n          <div className=\"glass-card rounded-2xl p-6\">\n            <div className=\"flex items-center justify-between mb-4\">\n              <h3 className=\"text-xl font-semibold text-gray-800 dark:text-gray-200 flex items-center\">\n                <Activity className=\"w-6 h-6 mr-2 text-blue-600\" />\n                Health Analysis & Daily Schedule\n              </h3>\n              <button\n                onClick={() => setShowHealthAnalysis(false)}\n                className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200\"\n              >\n                <X className=\"w-5 h-5\" />\n              </button>\n            </div>\n            \n            {/* Detected Diseases */}\n            {recommendations.diseases && recommendations.diseases.length > 0 && (\n              <div className=\"mb-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg\">\n                <h4 className=\"font-medium text-blue-800 dark:text-blue-200 mb-2\">Detected Conditions:</h4>\n                <div className=\"flex flex-wrap gap-2\">\n                  {recommendations.diseases.map((disease, index) => (\n                    <span key={index} className=\"px-3 py-1 bg-blue-100 dark:bg-blue-800 text-blue-800 dark:text-blue-200 rounded-full text-sm\">\n                      {disease}\n                    </span>\n                  ))}\n                </div>\n              </div>\n            )}\n          </div>\n          \n          {renderRecommendations()}\n        </motion.div>\n      )}\n\n      {/* Original Recommendations Display */}\n      {currentStep === 'recommendations' && !showHealthAnalysis && renderRecommendations()}\n\n      {error && (\n        <motion.div\n          initial={{ opacity: 0 }}\n          animate={{ opacity: 1 }}\n          className=\"mt-4 p-4 bg-red-50 dark:bg-red-900/20 rounded-lg border border-red-200 dark:border-red-800\"\n        >\n          <div className=\"flex items-center space-x-2 text-red-700 dark:text-red-300\">\n            <AlertCircle className=\"w-5 h-5\" />\n            <span>{error}</span>\n          </div>\n        </motion.div>\n      )}\n\n      {isProcessing && (\n        <motion.div\n          initial={{ opacity: 0 }}\n          animate={{ opacity: 1 }}\n          className=\"mt-4 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg\"\n        >\n          <div className=\"flex items-center space-x-3\">\n            <div className=\"typing-indicator\">\n              <div className=\"typing-dot\"></div>\n              <div className=\"typing-dot\"></div>\n              <div className=\"typing-dot\"></div>\n            </div>\n            <span className=\"text-sm text-blue-700 dark:text-blue-300\">\n              {currentStep === 'ocr' ? 'Extracting text from prescription...' :\n               currentStep === 'analysis' ? 'Analyzing medical conditions...' :\n               'Processing your request...'}\n            </span>\n          </div>\n        </motion.div>\n      )}\n    </div>\n  );\n};\n\nexport default PrescriptionUpload;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}